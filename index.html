<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>TimeTracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<h1>TimeTracker</h1>
<p id="user"></p>
<p id="balance"></p>
<button id="logoutBtn">DÃ©connexion</button>

<script>
const supabase = supabase.createClient("{SUPABASE_URL}", "{SUPABASE_KEY}");

(async () => {{
  const {{ data }} = await supabase.auth.getSession();
  if (!data.session) window.location.href = "login.html";

  const cfg = JSON.parse(localStorage.getItem("timeTrackerConfig"));
  if (!cfg) window.location.href = "app.html";

  user.textContent = cfg.name;
  balance.textContent = cfg.currentBalance + " h";
}})();

document.getElementById("logoutBtn").addEventListener("click", async () => {{
  await supabase.auth.signOut();
  window.location.href = "login.html";
}});
</script>

</body>
</html>
