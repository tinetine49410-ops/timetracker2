<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Configuration – TimeTracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<h2>Configuration initiale</h2>
<input id="userName" placeholder="Nom / Prénom">
<input id="startBalance" type="number" step="0.01" placeholder="Solde départ">
<input id="startDate" type="date">
<select id="contractType">
<option value="">-- Contrat --</option>
<option value="39h">39h travaillées / 38h payées</option>
</select>
<button id="startAppBtn">Démarrer l'application</button>

<script>
const supabase = supabase.createClient("{SUPABASE_URL}", "{SUPABASE_KEY}");

(async () => {{
  const {{ data }} = await supabase.auth.getSession();
  if (!data.session) window.location.href = "login.html";
}})();

document.getElementById("startAppBtn").addEventListener("click", () => {{
  const config = {{
    name: userName.value,
    startBalance: parseFloat(startBalance.value),
    currentBalance: parseFloat(startBalance.value),
    startDate: startDate.value,
    contract: contractType.value
  }};
  localStorage.setItem("timeTrackerConfig", JSON.stringify(config));
  window.location.href = "index.html";
}});
</script>

</body>
</html>
